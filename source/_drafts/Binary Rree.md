---
title: Binary Tree
tags: [Algorithm, Tree]
categories: [Algorithm]
date: 2021-3-5
---

## [自平衡二分查找树](https://zh.wikipedia.org/zh-cn/AVL%E6%A0%91)

##　[红黑树](https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91)

###　红黑树属性

1. 节点是红色或黑色.
2. 根节点必须是黑色.
3. 叶子节点都是黑色空节点.
4. 红色节点的子节点都必须是黑色(不允许存在连续的红色节点).
5. 从任何节点出发到叶子节点路径上黑色节点的数量必须一致.


- 红黑树是自平衡二分查找树,也就是说二分查找树的特征都保留,而其颜色属性就用于平衡树高度,以防止数据结构查找修改复杂度退化为链表.

###　插入操作

>　红黑树插入是先按二分查找树的规律将新节点插入到树叶子节点,再对新节点所在关注点进行调色与旋转操作以满足颜色属性.所以这儿的操作都在已实现二分查找属性基础进行.同时为了减少插入带来的属性违背,新插入的节点都默认为红色.

#### Case１

如果插入的节点位置在根上,直接将节点颜色改为黑色.

#### Case2

插入节点的父节点是黑色,此时不需要任何调整,所有原则皆满足.不增加黑色节点,任何路径上黑色节点数量不变,也没产生新的连续红节点.因为叶子节点始终是黑色加在新节点后面不会增加.同时,因为属性４的存在,新加节点分支不可能退化到相邻分支的２倍长度.

_note:排除Case1,Case2的情况后,这个时候父节点只是红色._

#### Case3

![picture](https://upload.wikimedia.org/wikipedia/commons/c/c8/Red-black_tree_insert_case_3.png)

插入新节点的叔父节点是红色(排除Case1,Case2的情况后,这个时候父节点也是红色,也就是说上一层两个节点与当前节点都是红色).到目前为止,除当前新节点外,树的颜色原则是保持得很好的,新节点的插入打破了原则４(有连续的红色节点).这个时候出现的并排的红色节点只需要两个颜色一起改变(也就是直接将父节点与步父节点颜色变为黑色)即可将当前节点的原则４修复,这样做产生了新的黑节点,为了维持原则５同时两个变色的节点为兄弟节点,只需要将这两个节点的父节点变为红色即可修复当前节点层的原则５(这时原节点的祖父节点的变色带来的问题又放在不同的Case中一直递归到根节点).这样一直递归到根节点(根节点为黑色不修改而让产生的黑色节点最终放在了根节点而作用在所有的路径上),将所有节点的原则５修复.

_note:接下来的出现的情况只剩下叔父节点为黑色,父节点一层的颜色不一致.同时当前节点的父节点要么是在祖父节点左边要么在祖父节点右边,两类情况都使用旋转修复,方向相反而已.这个时候要修复原则4,只需要将两个红色节点变成兄弟节点即可(因为成为兄弟节点后,即不是连续红节点,也不增加黑色节点)._

#### Case4

![picture](https://upload.wikimedia.org/wikipedia/commons/5/56/Red-black_tree_insert_case_4.png)

如图所示:在新节点插入后,产生了两个连续的红节点(不在同一方向),这时要做的仅仅是将两个红节点旋转到同一方向以进入到 Case5.

1. 左旋(如果父节点在祖父节点右节点当前节点在父节点左节点则使用右旋)当前节点与父节点,使当前节点与父节点祖父节点在一个方向上(以方便后一步骤旋转祖父节点与父节点)进入Case5

#### Case5

![case5](https://upload.wikimedia.org/wikipedia/commons/6/66/Red-black_tree_insert_case_5.png)

> 除 Case4 外, Case3 与直接刚插入新节点时都可能直接进入到 Case5 中来.

1. 右旋/左旋祖父节点与父点
2. 交换原父节点与原祖父节点颜色(原祖父节点颜色只会是黑色),这个时候原祖父节点成当前节点兄弟节点,原父节点成为节点的父节点,交换颜色即将原祖父节点变为红色,而原父节点变为黑色.达到的效果是,当前节点分支不再有连续红节点,也没有增加黑色节点,兄弟节点分支增加了一个红色节点,并不增加黑色节点.

走到 Case5 到此插入完成,此外, Case3,Case2,Case1 都有可能完成插入.

### Delete

> 基于二分查找树
